{% extends "base.html" %}

{% block title %}Inställningar - {{ concert_name or 'Klasskonsert 24C' }}{% endblock %}

{% block content %}
<div class="admin-container">
    <div class="admin-header">
        <h2>Inställningar</h2>
        <div class="admin-actions">
            <a href="{{ url_for('admin.dashboard') }}" class="btn btn-secondary">← Tillbaka till dashboard</a>
        </div>
    </div>
    
    <div class="settings-section">
        <form method="POST" action="{{ url_for('admin.update_settings') }}" enctype="multipart/form-data">
            <div class="settings-group">
                <h3>Priser</h3>
                <div class="form-group">
                    <label for="adult_price">Ordinarie biljett (kr)</label>
                    <input type="number" id="adult_price" name="adult_price" value="{{ settings.get('adult_price', '200') }}" required>
                </div>
                
                <div class="form-group">
                    <label for="student_price">Studentbiljett (kr)</label>
                    <input type="number" id="student_price" name="student_price" value="{{ settings.get('student_price', '100') }}" required>
                </div>
            </div>
            
            <div class="settings-group">
                <h3>Biljettyper</h3>
                <div class="form-group">
                    <label for="adult_ticket_label">Ordinarie biljett - etikett</label>
                    <input type="text" id="adult_ticket_label" name="adult_ticket_label" value="{{ settings.get('adult_ticket_label', 'Ordinarie biljett') }}" required>
                </div>
                
                <div class="form-group">
                    <label for="student_ticket_label">Studentbiljett - etikett</label>
                    <input type="text" id="student_ticket_label" name="student_ticket_label" value="{{ settings.get('student_ticket_label', 'Studentbiljett') }}" required>
                </div>
            </div>
            
            <div class="settings-group">
                <h3>Kontaktinformation</h3>
                <div class="form-group">
                    <label for="swish_number">Swish-nummer</label>
                    <input type="text" id="swish_number" name="swish_number" value="{{ settings.get('swish_number', '070 123 45 67') }}" required>
                </div>
                
                <div class="form-group">
                    <label for="swish_recipient_name">Swish-mottagarens namn</label>
                    <input type="text" id="swish_recipient_name" name="swish_recipient_name" value="{{ settings.get('swish_recipient_name', 'Oliver Ahlstrand') }}" required>
                </div>
                
                <div class="form-group">
                    <label for="contact_email">Kontakt e-post (visas i sidfot)</label>
                    <input type="email" id="contact_email" name="contact_email" value="{{ settings.get('contact_email', 'oliver.ahlstrand@icloud.com') }}" required>
                </div>
                
                <div class="form-group">
                    <label for="admin_email">Administratörs e-post</label>
                    <input type="email" id="admin_email" name="admin_email" value="{{ settings.get('admin_email', 'oliver.ahlstrand@icloud.com') }}" required>
                </div>
            </div>
            
            <div class="settings-group">
                <h3>Konsertinformation</h3>
                <div class="form-group">
                    <label for="concert_name">Konsert namn</label>
                    <input type="text" id="concert_name" name="concert_name" value="{{ settings.get('concert_name', 'Klasskonsert 24C') }}" required>
                </div>
                
                <div class="form-group">
                    <label for="welcome_message">Välkomstmeddelande</label>
                    <input type="text" id="welcome_message" name="welcome_message" value="{{ settings.get('welcome_message', 'Välkommen till 24c:s klasspelning!') }}" required>
                </div>
                
                <div class="form-group">
                    <label for="concert_date">Konsertdatum</label>
                    <input type="text" id="concert_date" name="concert_date" value="{{ settings.get('concert_date', '29/1 2026') }}" required>
                </div>
                
                <div class="form-group">
                    <label for="concert_venue">Konsertlokal</label>
                    <input type="text" id="concert_venue" name="concert_venue" value="{{ settings.get('concert_venue', 'Aulan på Rytmus Stockholm') }}" required>
                </div>
            </div>
            
            <div class="settings-group">
                <h3>Logo för QR-koder</h3>
                <div class="form-group">
                    <label for="qr_logo">Ladda upp logo (PNG/JPG, max 200x200px)</label>
                    <input type="file" id="qr_logo" name="qr_logo" accept="image/png,image/jpeg,image/jpg">
                    {% if settings.get('qr_logo_data') %}
                        <div class="current-logo">
                            <p>Aktuell logo:</p>
                            <img src="data:{{ settings.get('qr_logo_content_type', 'image/jpeg') }};base64,{{ settings.get('qr_logo_data') }}" 
                                 alt="Current logo" style="max-width: 100px; max-height: 100px; border: 1px solid #ddd; padding: 5px;">
                            <p><small>För att ändra logo, välj en ny fil ovan</small></p>
                        </div>
                    {% else %}
                        <p><small>Ingen logo uppladdad. QR-koder kommer att visas utan logo.</small></p>
                    {% endif %}
                </div>
            </div>
            
            <div class="settings-group">
                <h3>Systeminställningar</h3>
                <div class="form-group">
                    <label for="max_tickets_per_booking">Max biljetter per bokning</label>
                    <input type="number" id="max_tickets_per_booking" name="max_tickets_per_booking" value="{{ settings.get('max_tickets_per_booking', '4') }}" required>
                </div>
            </div>
            
            <div class="form-actions">
                <button type="submit" class="btn btn-primary">Spara inställningar</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}
